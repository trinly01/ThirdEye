webpackJsonp([10],{356:function(s,e,t){var a=t(224)(t(436),t(473),null,null,null);s.exports=a.exports},429:function(s,e,t){s.exports=t.p+"img/boy-avatar.5ff53af.png"},430:function(s,e,t){s.exports=t.p+"img/linux-avatar.986fd62.png"},436:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={beforeDestroy:function(){clearInterval(this.interval)},data:function(){return{interval:null,messagesAdminToStore:[],messagesStoreToAdmin:[],messagesAdminToAll:[],message:""}},computed:{messages:function(){var s=this.$refs.messagesDiv;s&&setTimeout(function(){s.scrollTop=s.scrollHeight},100);var e=this.$lodash.concat(this.messagesAdminToStore,this.messagesStoreToAdmin,this.messagesAdminToAll);return this.$lodash.sortBy(e,[".key"])},email:function(){return this.$bindAsArray("messagesAdminToStore",this.$database.ref("messages").orderByChild("fromto").equalTo("admin"+this.$route.params.email)),this.$bindAsArray("messagesStoreToAdmin",this.$database.ref("messages").orderByChild("fromto").equalTo(this.$route.params.email+"admin")),this.$bindAsArray("messagesAdminToAll",this.$database.ref("messages").orderByChild("fromto").equalTo("adminall")),this.$route.params.email}},mounted:function(){var s=this;this.$watch(function(){return s.$store.state.user&&s.$store.state.user.data?s.$store.state.user.data.type:null},function(){s.$store.state.user&&s.$store.state.user.data&&(s.$bindAsArray("messagesAdminToStore",s.$database.ref("messages").orderByChild("fromto").equalTo("admin"+s.$route.params.email)),s.$bindAsArray("messagesStoreToAdmin",s.$database.ref("messages").orderByChild("fromto").equalTo(s.$route.params.email+"admin")),s.$bindAsArray("messagesAdminToAll",s.$database.ref("messages").orderByChild("fromto").equalTo("adminall")))}),this.$store.state.user&&this.$store.state.user.data&&(this.$bindAsArray("messagesAdminToStore",this.$database.ref("messages").orderByChild("fromto").equalTo("admin"+this.$route.params.email)),this.$bindAsArray("messagesStoreToAdmin",this.$database.ref("messages").orderByChild("fromto").equalTo(this.$route.params.email+"admin")),this.$bindAsArray("messagesAdminToAll",this.$database.ref("messages").orderByChild("fromto").equalTo("adminall"))),this.interval=setInterval(function(){return s.$forceUpdate()},6e4)},methods:{send:function(){var s=this,e={admin:this.$store.state.user.data.email,fromto:"admin"+this.$route.params.email,msg:this.message,dateTime:this.$moment().format()};this.$firebaseRefs.messagesAdminToStore.push(e).then(function(){s.message=""})}}}},473:function(s,e,t){s.exports={render:function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("div",{staticClass:"column"},[a("div",{staticClass:"toolbar"},[s._v("\n    "+s._s(s.email)+"\n  ")]),s._v(" "),a("div",{ref:"messagesDiv",staticClass:"layout-view auto",staticStyle:{"max-height":"90vh"}},[a("div",{staticClass:"layout-padding"},s._l(s.messages,function(e){return a("div",{key:e[".key"],class:e.fromto==="admin"+s.$route.params.email?"chat-you":"chat-other"},[a("div",{staticClass:"chat-user"},[e.fromto==="admin"+s.$route.params.email?a("img",{attrs:{src:t(430)}}):a("img",{attrs:{src:t(429)}})]),s._v(" "),a("div",{staticClass:"chat-date"},[s._v("\n        "+s._s(s.$moment(e.dateTime).fromNow())+" "+s._s(e.from)+"\n      ")]),s._v(" "),a("div",{staticClass:"chat-message"},[a("p",[s._v("\n          "+s._s(e.msg)+"\n        ")])])])}))]),s._v(" "),a("div",{staticClass:"row"},[a("form",{staticClass:"auto row vertical-bottom",staticStyle:{padding:"16px 16px 16px 16px"},on:{submit:function(e){e.preventDefault(),s.send(e)}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:s.message,expression:"message"}],staticClass:"auto",staticStyle:{resize:"none"},attrs:{placeholder:"asd"},domProps:{value:s.message},on:{input:function(e){e.target.composing||(s.message=e.target.value)}}}),s._v(" "),s._m(0)])])])},staticRenderFns:[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("button",{staticClass:"circular small clear primary",attrs:{type:"submit"}},[t("i",[s._v("send")])])}]}}});